<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å‹è®­ç»ƒç³»ç»Ÿ - DATA HAMMER</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        :root {
            --primary-blue: #0066cc;
            --secondary-blue: #0099ff;
            --light-bg: #f8fafc;
            --card-bg: #ffffff;
            --accent-purple: #8a2be2;
            --accent-green: #00aa55;
            --accent-red: #ff4444;
            --accent-yellow: #ffaa00;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --border-color: #e1e5e9;
            --shadow-color: rgba(0, 102, 204, 0.1);
            --success-color: #10b981;
            --warning-color: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body.subpage-bg {
            background: var(--light-bg);
            color: var(--text-primary);
            font-family: "Segoe UI", "Microsoft YaHei", system-ui, sans-serif;
            min-height: 100vh;
            padding: 20px;
        }

        /* å¤´éƒ¨å¯¼èˆª */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .page-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .page-title h1 {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 0;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--primary-blue);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: var(--secondary-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 102, 204, 0.2);
        }

        /* ä¸»å®¹å™¨ */
        .training-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (max-width: 1024px) {
            .training-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }

        /* è§†é¢‘å±•ç¤ºåŒº */
        .video-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 102, 204, 0.1);
        }

        .section-title .icon {
            font-size: 1.6rem;
        }

        .video-wrapper {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            background: #000;
            margin-bottom: 20px;
        }

        #trainVideo {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 15px;
        }

        .video-info {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .info-value {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* è¡¨å•åŒºåŸŸ */
        .form-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        .form-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 102, 204, 0.1);
        }

        .form-title .icon {
            font-size: 1.6rem;
        }

        #trainForm {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .form-group label .required {
            color: var(--accent-red);
        }

        select, input[type="text"], input[type="number"], textarea {
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            background: #f8fafc;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        select:focus, input[type="text"]:focus,
        input[type="number"]:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
            background: white;
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }

        select {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23666666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 16px;
            padding-right: 45px;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        /* è®­ç»ƒçŠ¶æ€æŒ‡ç¤ºå™¨ */
        .training-status {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin-top: 10px;
            display: none;
        }

        .status-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-green);
            animation: pulse 1.5s infinite;
        }

        .status-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-purple));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .status-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* è®­ç»ƒæŒ‰é’® */
        .training-button {
            position: relative;
            padding: 18px 30px;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .training-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 102, 204, 0.3);
        }

        .training-button:active {
            transform: translateY(-1px);
        }

        .training-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .button-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }

        /* é€šçŸ¥åŒºåŸŸ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
            max-width: 350px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success-color);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .notification.error {
            background: var(--accent-red);
            box-shadow: 0 4px 15px rgba(255, 68, 68, 0.3);
        }

        .notification.info {
            background: var(--primary-blue);
            box-shadow: 0 4px 15px rgba(0, 102, 204, 0.3);
        }

        /* åŠ¨ç”» */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }

            .page-title h1 {
                font-size: 1.8rem;
            }

            .training-container {
                padding: 0 10px;
            }

            .video-section,
            .form-section {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .page-title h1 {
                font-size: 1.6rem;
            }

            .section-title,
            .form-title {
                font-size: 1.2rem;
            }

            select, input[type="text"], input[type="number"], textarea {
                padding: 12px 14px;
            }
        }
    </style>
</head>

<body class="subpage-bg">
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <div class="page-header">
        <div class="page-title">
            <span class="icon">ğŸ¤–</span>
            <h1>æ¨¡å‹è®­ç»ƒç³»ç»Ÿ</h1>
        </div>
        <a href="/" class="back-button">
            <span>â†</span>
            è¿”å›ä¸»é¡µ
        </a>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="training-container">
        <!-- å·¦ä¾§ï¼šè§†é¢‘å±•ç¤ºåŒº -->
        <div class="video-section">
            <div class="section-title">
                <span class="icon">ğŸ¬</span>
                <span>è®­ç»ƒç»“æœé¢„è§ˆ</span>
            </div>

            <div class="video-wrapper">
                <video id="trainVideo" controls poster="{{ url_for('static', filename='images/video-poster.jpg') }}">
                    <source src="{{ url_for('static', filename='videos/sample.mp4') }}" type="video/mp4">
                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
                </video>
            </div>

            <div class="video-info">
                <div class="info-item">
                    <span class="info-label">è§†é¢‘çŠ¶æ€ï¼š</span>
                    <span class="info-value" id="videoStatus">å°±ç»ª</span>
                </div>
                <div class="info-item">
                    <span class="info-label">åˆ†è¾¨ç‡ï¼š</span>
                    <span class="info-value" id="videoResolution">1920Ã—1080</span>
                </div>
                <div class="info-item">
                    <span class="info-label">æ—¶é•¿ï¼š</span>
                    <span class="info-value" id="videoDuration">00:00</span>
                </div>
            </div>

            <!-- è®­ç»ƒçŠ¶æ€æŒ‡ç¤ºå™¨ -->
            <div class="training-status" id="trainingStatus">
                <div class="status-header">
                    <div class="status-indicator"></div>
                    <div class="status-title">è®­ç»ƒè¿›è¡Œä¸­...</div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="trainingProgress"></div>
                </div>
                <div class="status-details">
                    <span id="currentStep">åˆå§‹åŒ–è®­ç»ƒç¯å¢ƒ</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>
        </div>

        <!-- å³ä¾§ï¼šè®­ç»ƒé…ç½®è¡¨å• -->
        <div class="form-section">
            <div class="form-title">
                <span class="icon">âš™ï¸</span>
                <span>è®­ç»ƒå‚æ•°é…ç½®</span>
            </div>

            <form id="trainForm">
                <div class="form-group">
                    <label>
                        <span>ğŸ“¦</span>
                        æ¨¡å‹é€‰æ‹©
                        <span class="required">*</span>
                    </label>
                    <select name="model_choice" required>
                        <option value="">è¯·é€‰æ‹©æ¨¡å‹</option>
                        <option value="modelA">Model A - åŸºç¡€å¯¹è¯æ¨¡å‹</option>
                        <option value="modelB">Model B - é«˜çº§è§†è§‰æ¨¡å‹</option>
                        <option value="SyncTalk">SyncTalk - å®æ—¶åŒæ­¥æ¨¡å‹</option>
                        <option value="custom">è‡ªå®šä¹‰æ¨¡å‹</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>
                        <span>ğŸ“</span>
                        è®­ç»ƒæ•°æ®è·¯å¾„
                        <span class="required">*</span>
                    </label>
                    <input type="text" name="ref_video"
                           placeholder="ä¾‹å¦‚ï¼šstatic/videos/training_data.mp4"
                           required>
                    <small style="color: var(--text-secondary); margin-top: 5px;">
                        æ”¯æŒè§†é¢‘æ–‡ä»¶æˆ–å›¾åƒåºåˆ—ç›®å½•
                    </small>
                </div>

                <div class="form-group">
                    <label>
                        <span>ğŸ®</span>
                        GPUè®¾å¤‡é€‰æ‹©
                    </label>
                    <select name="gpu_choice">
                        <option value="auto">è‡ªåŠ¨é€‰æ‹©ï¼ˆæ¨èï¼‰</option>
                        <option value="GPU0">GPU 0 - NVIDIA RTX 4090 (24GB)</option>
                        <option value="GPU1">GPU 1 - NVIDIA RTX 3090 (24GB)</option>
                        <option value="multi">å¤šGPUå¹¶è¡Œè®­ç»ƒ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>
                        <span>ğŸ”„</span>
                        è®­ç»ƒè½®æ•° (Epochs)
                    </label>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <input type="range" id="epochRange" min="1" max="100" value="10" style="flex: 1;">
                        <input type="number" id="epochInput" name="epoch" min="1" max="100" value="10"
                               style="width: 80px;">
                    </div>
                    <small style="color: var(--text-secondary); margin-top: 5px;">
                        å»ºè®®å€¼ï¼š10-50è½®ï¼Œè½®æ•°è¶Šå¤šè®­ç»ƒè¶Šå……åˆ†ä½†è€—æ—¶æ›´é•¿
                    </small>
                </div>

                <div class="form-group">
                    <label>
                        <span>âš¡</span>
                        é«˜çº§å‚æ•°é…ç½®
                    </label>
                    <textarea name="custom_params"
                              placeholder="è¾“å…¥è‡ªå®šä¹‰JSONå‚æ•°ï¼Œä¾‹å¦‚ï¼š
{
  &quot;learning_rate&quot;: 0.001,
  &quot;batch_size&quot;: 16,
  &quot;optimizer&quot;: &quot;adam&quot;
}"></textarea>
                </div>

                <div class="form-group">
                    <label>
                        <span>ğŸ“Š</span>
                        è®­ç»ƒè¾“å‡ºé…ç½®
                    </label>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" name="save_checkpoint" checked>
                            ä¿å­˜æ£€æŸ¥ç‚¹
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" name="generate_log" checked>
                            ç”Ÿæˆè®­ç»ƒæ—¥å¿—
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" name="export_model">
                            å¯¼å‡ºæœ€ç»ˆæ¨¡å‹
                        </label>
                    </div>
                </div>

                <button type="submit" class="training-button" id="trainButton">
                    <div class="button-content">
                        <span>ğŸš€ å¼€å§‹è®­ç»ƒ</span>
                        <div class="spinner" id="trainSpinner"></div>
                    </div>
                </button>
            </form>
        </div>
    </div>

    <!-- é€šçŸ¥åŒºåŸŸ -->
    <div id="notification" class="notification"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // è§†é¢‘å…ƒç´ å’ŒçŠ¶æ€
            const videoEl = document.getElementById('trainVideo');
            const videoStatus = document.getElementById('videoStatus');
            const videoResolution = document.getElementById('videoResolution');
            const videoDuration = document.getElementById('videoDuration');
            const trainingStatus = document.getElementById('trainingStatus');
            const progressBar = document.getElementById('trainingProgress');
            const progressPercent = document.getElementById('progressPercent');
            const currentStep = document.getElementById('currentStep');

            // è¡¨å•å…ƒç´ 
            const trainForm = document.getElementById('trainForm');
            const trainButton = document.getElementById('trainButton');
            const trainSpinner = document.getElementById('trainSpinner');
            const epochRange = document.getElementById('epochRange');
            const epochInput = document.getElementById('epochInput');

            // é€šçŸ¥ç³»ç»Ÿ
            const notification = document.getElementById('notification');

            // åŒæ­¥æ»‘åŠ¨æ¡å’Œæ•°å­—è¾“å…¥
            epochRange.addEventListener('input', () => {
                epochInput.value = epochRange.value;
            });

            epochInput.addEventListener('input', () => {
                let value = Math.min(100, Math.max(1, parseInt(epochInput.value) || 1));
                epochInput.value = value;
                epochRange.value = value;
            });

            // è§†é¢‘çŠ¶æ€ç›‘å¬
            videoEl.addEventListener('loadedmetadata', () => {
                videoResolution.textContent = `${videoEl.videoWidth}Ã—${videoEl.videoHeight}`;
                const duration = Math.floor(videoEl.duration);
                const minutes = Math.floor(duration / 60);
                const seconds = duration % 60;
                videoDuration.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                videoStatus.textContent = 'å·²åŠ è½½';
            });

            videoEl.addEventListener('waiting', () => {
                videoStatus.textContent = 'ç¼“å†²ä¸­...';
            });

            videoEl.addEventListener('playing', () => {
                videoStatus.textContent = 'æ’­æ”¾ä¸­';
            });

            // æ˜¾ç¤ºé€šçŸ¥
            function showNotification(message, type = 'info') {
                notification.textContent = message;
                notification.className = `notification ${type}`;
                notification.classList.add('show');

                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }

            // æ¨¡æ‹Ÿè®­ç»ƒè¿›åº¦
            function simulateTrainingProgress() {
                let progress = 0;
                const steps = [
                    'åˆå§‹åŒ–è®­ç»ƒç¯å¢ƒ...',
                    'åŠ è½½è®­ç»ƒæ•°æ®...',
                    'å‡†å¤‡æ¨¡å‹æ¶æ„...',
                    'å¼€å§‹è®­ç»ƒè¿­ä»£...',
                    'ä¿å­˜æ£€æŸ¥ç‚¹...',
                    'ç”Ÿæˆè®­ç»ƒæŠ¥å‘Š...',
                    'å®Œæˆè®­ç»ƒä»»åŠ¡'
                ];

                const interval = setInterval(() => {
                    progress += 1;
                    progressBar.style.width = `${progress}%`;
                    progressPercent.textContent = `${progress}%`;

                    // æ›´æ–°å½“å‰æ­¥éª¤
                    const stepIndex = Math.floor(progress / (100 / steps.length));
                    if (stepIndex < steps.length) {
                        currentStep.textContent = steps[stepIndex];
                    }

                    if (progress >= 100) {
                        clearInterval(interval);
                        trainButton.disabled = false;
                        trainButton.querySelector('span').textContent = 'ğŸš€ è®­ç»ƒå®Œæˆ';
                        trainSpinner.style.display = 'none';

                        // æ˜¾ç¤ºå®Œæˆé€šçŸ¥
                        showNotification('ğŸ‰ æ¨¡å‹è®­ç»ƒå®Œæˆï¼è®­ç»ƒæŠ¥å‘Šå·²ç”Ÿæˆã€‚', 'success');

                        // 3ç§’åéšè—çŠ¶æ€æŒ‡ç¤ºå™¨
                        setTimeout(() => {
                            trainingStatus.style.display = 'none';
                        }, 3000);
                    }
                }, 100);
            }

            // è¡¨å•æäº¤å¤„ç†
            trainForm.addEventListener('submit', async function(e) {
                e.preventDefault();

                // è¡¨å•éªŒè¯
                const formData = new FormData(this);
                const refVideoPath = formData.get('ref_video');

                if (!refVideoPath) {
                    showNotification('è¯·å¡«å†™è®­ç»ƒæ•°æ®è·¯å¾„', 'error');
                    return;
                }

                // æ˜¾ç¤ºè®­ç»ƒçŠ¶æ€
                trainingStatus.style.display = 'block';
                trainButton.disabled = true;
                trainButton.querySelector('span').textContent = 'è®­ç»ƒä¸­...';
                trainSpinner.style.display = 'block';

                // é‡ç½®è¿›åº¦æ¡
                progressBar.style.width = '0%';
                progressPercent.textContent = '0%';
                currentStep.textContent = 'åˆå§‹åŒ–è®­ç»ƒç¯å¢ƒ...';

                // æ˜¾ç¤ºå¼€å§‹é€šçŸ¥
                showNotification('ğŸš€ å¼€å§‹æ¨¡å‹è®­ç»ƒï¼Œè¯·è€å¿ƒç­‰å¾…...', 'info');

                try {
                    // å¦‚æœæœ‰è§†é¢‘è·¯å¾„ï¼Œå°è¯•åŠ è½½è§†é¢‘
                    if (refVideoPath) {
                        const newSrc = refVideoPath.startsWith('http')
                            ? refVideoPath
                            : "/" + refVideoPath.replace("\\", "/") + '?t=' + Date.now();

                        videoEl.src = newSrc;
                        videoEl.load();
                        videoStatus.textContent = 'åŠ è½½è®­ç»ƒæ•°æ®...';

                        await new Promise((resolve) => {
                            videoEl.onloadeddata = resolve;
                            setTimeout(resolve, 1000); // è¶…æ—¶ä¿æŠ¤
                        });

                        videoStatus.textContent = 'å°±ç»ª';
                    }

                    // æ¨¡æ‹Ÿåç«¯è¯·æ±‚
                    const response = await fetch('/model_training', {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'X-Requested-With': 'XMLHttpRequest'
                        }
                    });

                    const data = await response.json();

                    if (data.status === 'success') {
                        // å¼€å§‹æ¨¡æ‹Ÿè®­ç»ƒè¿›åº¦
                        simulateTrainingProgress();

                        // æ›´æ–°è§†é¢‘ä¿¡æ¯
                        if (data.video_info) {
                            videoResolution.textContent = data.video_info.resolution || '1920Ã—1080';
                            videoDuration.textContent = data.video_info.duration || '00:00';
                        }
                    } else {
                        throw new Error(data.message || 'è®­ç»ƒå¤±è´¥');
                    }

                } catch (error) {
                    console.error('è®­ç»ƒé”™è¯¯:', error);

                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    trainButton.disabled = false;
                    trainButton.querySelector('span').textContent = 'ğŸš€ å¼€å§‹è®­ç»ƒ';
                    trainSpinner.style.display = 'none';
                    trainingStatus.style.display = 'none';

                    // æ˜¾ç¤ºé”™è¯¯é€šçŸ¥
                    showNotification('âŒ ' + error.message, 'error');
                }
            });

            // åˆå§‹åŠ è½½å®Œæˆé€šçŸ¥
            setTimeout(() => {
                showNotification('âœ… æ¨¡å‹è®­ç»ƒç³»ç»Ÿå·²å°±ç»ªï¼Œè¯·é…ç½®å‚æ•°å¼€å§‹è®­ç»ƒ', 'info');
            }, 1000);
        });
    </script>
</body>
</html>